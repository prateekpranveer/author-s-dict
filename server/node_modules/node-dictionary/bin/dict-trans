#! /usr/bin/env node

const program = require('commander')

const { logger: { print }, pusher, request } = require('../lib/util')

const trans = require('../lib/trans')

program
  .usage('<text>')
  .description('translate text by baidu translator')
  .parse(process.argv)

program.on('--help', () => {
  const help = []
  const pushHelp = pusher(help)

  pushHelp('Examples:')
  pushHelp('$ dict trans Apple is not an apple', 4, 1)
  pushHelp('$ dict t Apple is not an apple', 4, 1)

  print(help)
})

const { args } = program

if (args.length) {
  request(trans, args.join(' '))
    .then(res => print(res))
} else {
  program.help()
}
