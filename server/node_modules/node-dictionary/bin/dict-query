#! /usr/bin/env node

const program = require('commander')

const { logger: { print }, pusher, request } = require('../lib/util')

const query = require('../lib/query')

program
  .usage('<word>')
  .description('query word by youdao dictionary')
  .parse(process.argv)

program.on('--help', () => {
  const help = []
  const pushHelp = pusher(help)

  pushHelp('Examples:')
  pushHelp('$ dict query apple', 4, 1)
  pushHelp('$ dict q apple', 4, 1)

  print(help)
})

const { args } = program

if (args.length) {
  request(query, args[0])
    .then(res => print(res))
} else {
  program.help()
}
