#! /usr/bin/env node

const program = require('commander')

const fs = require('fs')
const path = require('path')

const { error } = require('../lib/util/logger')

const config = require('../lib/trans/config')
const langs = require('../lib/trans/langs')

program
  .usage('[from] [to]')
  .description('toggle translator, default from [auto] to [zh]')
  .parse(process.argv)

const { args: [from = 'auto', to = 'zh'] } = program

if (langs[from] && langs[to]) {
  if (to === 'auto') {
    error('Target language cannot be auto')
  } else if (from === to) {
    error('Cannot be same languages')
  } else {
    config.from = from
    config.to = to
  }
} else {
  error('Invalid language')
}

fs.writeFileSync(path.resolve(__dirname, '../lib/trans/config.json'), JSON.stringify(config), 'utf-8')

console.log(`  Current translator is ${from} => ${to}`)
